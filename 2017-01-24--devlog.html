<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
        if (window.location.host.substr(-10) == '.github.io' && window.location.protocol != 'https:') {
            window.location.protocol = 'https:';
        }
    </script>

    <link href='http://fonts.googleapis.com/css?family=Noticia+Text:400,700' rel='stylesheet' type='text/css' />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="">
    <meta name="author" content="ozkriff">

    <title> This Month in ZoC - 2017.01.24 | ozkriff's devlog </title>

    <link rel="stylesheet" href="/theme/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="/theme/css/font-awesome.css" type="text/css"/>
    <link rel="shortcut icon" href="/favicon.png">
  </head>
  <body>
    <div class=container>
<div class="header">
    <a href="index.html">ozkriff's devlog</a> <span class="muted"></span>
</div>

<div class=navigation>
    <ul>
            <li><a href="/archives.html">archives</a> </li>
            <li><a href="/tags.html">tags</a> </li>
            <li><a href="/about.html">about</a> </li>
    </ul>
</div>
<div class=separator></div>        
        <div class=body>
    <h1 class="title"> This Month in ZoC - 2017.01.24</h1>
    <p class=date> 2017.01.24 </p>
    <p>(Repost from <a class="reference external" href="https://users.rust-lang.org/t/this-month-in-zone-of-control/6993">https://users.rust-lang.org/t/this-month-in-zone-of-control/6993</a>)</p>
<p>Hi, everyone! :)</p>
<p>It has been four months since the first post, sorry.
I'm struggling to find enough time for the project plus I was busy with
<a class="reference external" href="https://github.com/tomaka/glutin/issues/813">porting glutin to winit</a>
for about a month around October.</p>
<div class="section" id="helicopters">
<h2>Helicopters</h2>
<p><a class="reference external" href="https://github.com/ozkriff/zoc/issues/111">https://github.com/ozkriff/zoc/issues/111</a></p>
<img alt="helicopters" src="http://i.imgur.com/cW4Sr9q.png" />
<ul>
<li><p class="first">Helicopters can fly above any terrain or ground units, but can't capture sectors</p>
</li>
<li><p class="first">Most units can't attack helicopters - <cite>WeaponType</cite> got <cite>max_air_distance: Option&lt;i32&gt;</cite> field</p>
</li>
<li><p class="first">Helicopters can be seen by enemies even in non-visible tiles</p>
</li>
<li><p class="first">Helicopters have a different field of view rules - their FoV have no 'obstacle shadows':</p>
<img alt="comparison of land and air field of views" src="http://i.imgur.com/RlEH0IC.png" />
</li>
</ul>
<p>IDLE animation:</p>
<div class="youtube"><iframe
    frameborder="0"
    allowfullscreen
    src="https://www.youtube.com/embed/wj8ldf7sBRc?color=white&rel=0&showinfo=0"
></iframe></div><p>It's not easy for ground units to catch up with a helicopter :) :</p>
<div class="youtube"><iframe
    frameborder="0"
    allowfullscreen
    src="https://www.youtube.com/embed/u5yNCP_1G4M?color=white&rel=0&showinfo=0"
></iframe></div><p>Haven't got around to implement
<a class="reference external" href="https://github.com/ozkriff/zoc/issues/226">AA-guns</a>
and <a class="reference external" href="https://github.com/ozkriff/zoc/issues/226">Manpads</a>
yet so the main AA-defence for now is just jeep's machinegun.</p>
</div>
<div class="section" id="reinforcements">
<h2>Reinforcements</h2>
<p><a class="reference external" href="https://github.com/ozkriff/zoc/issues/208">https://github.com/ozkriff/zoc/issues/208</a></p>
<p>Players have no starting forces now - everything is bought
in reinforcement sectors for reinforcement points.</p>
<p>The upper-left corner displays the amount of reinforcement
points that current player has and their per-turn increment:</p>
<img alt="Reinforcements" src="http://i.imgur.com/jqlxAZY.png" />
<p>Reinforcement sectors are marked by two circles in player's color:</p>
<img alt="Circle marks" src="http://i.imgur.com/bFrBAwN.png" />
<p>There's an additional &quot;reinforcements&quot; item in the context menu: when clicked it opens a list of available units:</p>
<img alt="Main context menu" src="http://i.imgur.com/UNpnteQ.png" />
<p>This opens a list of available units:</p>
<img alt="Context sub-menu" src="http://i.imgur.com/3Kz0l5W.png" />
<p>There must be enough reinforcement points and enough room for the unit. Units have no move or attack points at their first turn.</p>
<p>And, by the way, AI has been taught to buy units too.</p>
</div>
<div class="section" id="map-selection">
<h2>Map selection</h2>
<p><a class="reference external" href="https://github.com/ozkriff/zoc/issues/213">https://github.com/ozkriff/zoc/issues/213</a></p>
<p>After the implementation of reinforcements it became possible to add map selection.</p>
<p>You can change map by clicking on the current map's name in the main menu screen:</p>
<img alt="Main menu" src="http://i.imgur.com/AAN510s.png" />
<p>It was mostly needed for testing/debugging purposes so most of the maps look like this for now:</p>
<img alt="Debugging map" src="http://i.imgur.com/4UnfdmC.png" />
<p>Tests however are in early prototype phase and are not in the repo yet.
Right now they use special maps but I intend to implement some ASCII-DSL like the following:</p>
<pre class="code literal-block">
let map = &quot;
    ... ... ... ...
      ... ... ... ...
    ... ... t.. r..
      t.. t.. r.. ..B
    r.A r.. r.. ..C
      ... t.. ... ...
&quot;;
</pre>
<p>where 't' is a 'trees', 'r' is a road and 'ABC' are positions.</p>
<p>Tests work by sending hardcoded commands and waiting for specified events in response.
I can't test anything that depends on RNG (attacks mostly) but the movements, FoW, etc are more or less testable.
It can't help with errors in visualizer but it makes it easier for me to refactor the Core.</p>
</div>
<div class="section" id="auto-deploy-to-github-releases">
<h2>Auto-deploy to github releases</h2>
<p><a class="reference external" href="https://github.com/ozkriff/zoc/pull/246">https://github.com/ozkriff/zoc/pull/246</a></p>
<p><a class="reference external" href="https://github.com/Gordon-F">&#64;Gordon-F</a> has implemented auto-deploy of releases for travis and appveyor.</p>
<p>Now you can download windows, linux and osx builds for tagged releases here from the <a class="reference external" href="https://github.com/ozkriff/zoc/releases">github releases page</a>.</p>
<p>Android is totally different story with all its SDKs/NDKs and is still built and uploaded manually.</p>
</div>
<div class="section" id="wreckages">
<h2>Wreckages</h2>
<p><a class="reference external" href="https://github.com/ozkriff/zoc/issues/247">https://github.com/ozkriff/zoc/issues/247</a></p>
<p>Now destroyed vehicles leave wreckages.</p>
<img alt="Wreckages" src="http://i.imgur.com/0fQW8jQ.png" />
<p>They only obstruct movement for now. Later they'll be used by infantry as protective covering.</p>
<p>When particle system will be implemented wreckages will emit smoke and fire.</p>
</div>
<div class="section" id="towing">
<h2>Towing</h2>
<p><a class="reference external" href="https://github.com/ozkriff/zoc/issues/161">https://github.com/ozkriff/zoc/issues/161</a></p>
<p>There're two new items in context menu: &quot;attach&quot; and &quot;detach&quot;.</p>
<p>You can't chain attachments or attach WholeTile-sized units.</p>
<p>Towing system is mostly important for quick reposition of field
guns but it can also help with clearing roads from wrecked vehicles.
The latter reason will become more important when partial damage for vehicles gets implemented.</p>
<div class="youtube"><iframe
    frameborder="0"
    allowfullscreen
    src="https://www.youtube.com/embed/WEBmAvGUMGU?color=white&rel=0&showinfo=0"
></iframe></div></div>
<div class="section" id="smoothly-fading-to-alpha-fog-of-war">
<h2>Smoothly fading to alpha Fog of War</h2>
<p><a class="reference external" href="https://github.com/ozkriff/zoc/issues/210">https://github.com/ozkriff/zoc/issues/210</a></p>
<div class="youtube"><iframe
    frameborder="0"
    allowfullscreen
    src="https://www.youtube.com/embed/eNwlOO_tTqs?color=white&rel=0&showinfo=0"
></iframe></div><p>Opening FoW is a very common action so it deserves to be a little more pretty :)</p>
<p>It was easy though I had to rework the FoW rendering code to make it use
a lot of independently colored scene nodes instead of a single big mesh.</p>
</div>
<div class="section" id="fixed-an-old-error-with-units-moving-into-invisible-enemies">
<h2>Fixed an old error with units moving into invisible enemies</h2>
<p><a class="reference external" href="https://github.com/ozkriff/zoc/issues/106">https://github.com/ozkriff/zoc/issues/106</a></p>
<p>This change caused some refactorings in the codebase:</p>
<ul class="simple">
<li>Added a new event type: <cite>Reveal</cite>, similar to ShowUnit but generated by <cite>Core</cite> itself and not by the filtering system</li>
<li><cite>Merge all `*State</cite> structs and <cite>GameState</cite> trait into one universal <cite>State</cite> struct &lt;<a class="reference external" href="https://github.com/ozkriff/zoc/issues/255">https://github.com/ozkriff/zoc/issues/255</a>&gt;`_</li>
<li>Added a proper FoW layer for air units</li>
</ul>
</div>
<div class="section" id="other-changes">
<h2>Other changes</h2>
<ul>
<li><p class="first"><a class="reference external" href="https://github.com/ozkriff/zoc/issues/159">The short-term roadmap was translated into English and updated</a></p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/ozkriff/zoc/issues/205">AI was taught to capture sectors</a></p>
<p>AI is still in poor state and crashes once in a while.
I need to implement replays to reproduce and fix these errors.
It's either AI sometimes issues orders to units that are already dead or there are bugs in the event filtering system.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/ozkriff/zoc/issues/197">Android memory alignment errors are finally gone</a>,
thanks to &#64;not-fl3, &#64;tomaka, &#64;brendanzab and &#64;mhintz.</p>
<p><a class="reference external" href="https://github.com/ozkriff/zoc/issues/248">Though android port is still not very stable</a>.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/ozkriff/zoc/issues/214">Fixed bridge slots count</a>.
Now bridges are real strategic points which can be controlled or blocked easily.</p>
</li>
<li><p class="first"><a class="reference external" href="https://github.com/ozkriff/zoc/issues/220">Do not reduce unit morale if the attack was harmless</a></p>
</li>
<li><p class="first">Added &quot;zoom in/out&quot; buttons:</p>
<img alt="zoom in-out buttons" src="http://i.imgur.com/G5E2Va2.png" />
<p>because it's simpler than handling multi-touch gestures on android :)</p>
</li>
</ul>
</div>
<div class="section" id="gameplay-screenshots">
<h2>Gameplay screenshots</h2>
<img alt="gameplay screenshot 1" src="http://i.imgur.com/DxfBok2.png" />
<img alt="gameplay screenshot 2" src="http://i.imgur.com/V4ZPCrT.png" />
<p><a class="reference external" href="https://twitter.com/ozkriff">&#64;ozkriff on Twitter</a></p>
</div>

    
<div class=twitter>
<a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
    <p class=tags>This entry was tagged as
      <a href="/tag/devlog.html">devlog</a>
      <a href="/tag/zoc.html">zoc</a>
    </p>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'ozkriffgithubio'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
        
<div class=footer>
  <p>&copy; Copyright <script language="JavaScript">var date = new Date(); document.write(date.getFullYear());</script> by ozkriff</p>
  <p> Powered by <a href="http://pypi.python.org/pypi/pelican/" target="_blank">Pelican</a>.  
    <a href="https://github.com/fjavieralba/flasky">Theme</a>  by <a href="http://fjavieralba.com">fjavieralba</a>
  </p> 
  <p>
    <div class=social style="font-size: 27px;">
      <ul>
<a href="http://twitter.com/ozkriff" target="_blank"> <li> <i class="icon-twitter-sign icon-large"> </li></i> </a><a href="https://www.linkedin.com/profile/view?id=AAMAABfeM3EBZh_SzJlI-iSEgVAs12f9d0S6ues" target="_blank"><li><i class="icon-linkedin-sign icon-large" ></i></li></a><a href="https://github.com/ozkriff" target="_blank"> <li> <i class="icon-github-sign icon-large"></i> </li> </a>

        <a href="http://ozkriff.github.io/feeds/all.rss.xml" rel="alternate" title="Recent Blog Posts"><li> <i class="icon-rss icon-large"></i> </li></a>
      </ul>
    </div>
  </p>
</div>    </div>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-70829739-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
